"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const csvtojson_1 = __importDefault(require("csvtojson"));
const path_1 = __importDefault(require("path"));
const fs_1 = __importDefault(require("fs"));
const dataOut = [];
const filePath = (dir) => path_1.default.resolve(__dirname, dir);
const writeStream = fs_1.default.createWriteStream(filePath('../assets/medAnvisaPrice.json'));
const readStream = fs_1.default.createReadStream(filePath('../assets/xls_conformidade_site_2021_01_v1.csv'));
const readline_1 = __importDefault(require("readline"));
const readInterface = readline_1.default.createInterface({
    input: readStream.pipe(csvtojson_1.default()),
    console: false,
});
readInterface.on('line', (data) => dataOut.push(JSON.parse(data)));
readInterface.on('close', () => writeStream.write(Buffer.from(JSON.stringify(dataOut))));
